<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تسجيل الدخول برقم الهاتف</title>
</head>
<body>
    <h1>تسجيل الدخول برقم الهاتف</h1>
    <input type="text" id="phoneNumber" placeholder="أدخل رقم هاتفك">
    <button onclick="sendVerificationCode()">إرسال رمز التحقق</button>

    <div id="verificationCodeSection" style="display:none;">
        <input type="text" id="verificationCode" placeholder="أدخل رمز التحقق">
        <button onclick="verifyCode()">تحقق</button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script>
        // تهيئة Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBP2bnt1DNNUO0dFtfiIovxMG-NM6yXPMM",
            authDomain: "aasa-8a079.firebaseapp.com",
            projectId: "aasa-8a079",
            storageBucket: "aasa-8a079.appspot.com",
            messagingSenderId: "849330713582",
            appId: "1:849330713582:web:your-app-id"
        };

        firebase.initializeApp(firebaseConfig);

        function sendVerificationCode() {
            const phoneNumber = document.getElementById('phoneNumber').value;
            const appVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container');

            firebase.auth().signInWithPhoneNumber(phoneNumber, appVerifier)
                .then((confirmationResult) => {
                    window.confirmationResult = confirmationResult;
                    document.getElementById('verificationCodeSection').style.display = 'block';
                })
                .catch((error) => {
                    console.error("Error sending verification code:", error);
                });
        }

        function verifyCode() {
            const verificationCode = document.getElementById('verificationCode').value;
            confirmationResult.confirm(verificationCode)
                .then((result) => {
                    const user = result.user;
                    console.log("User signed in successfully:", user);
                    alert("تم تسجيل الدخول بنجاح!");
                })
                .catch((error) => {
                    console.error("Error verifying code:", error);
                    alert("رمز التحقق غير صحيح!");
                });
        }
    </script>
</body>
</html>